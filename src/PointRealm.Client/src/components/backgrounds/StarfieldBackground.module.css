.wrapper {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  overflow: hidden;
}

.layer {
  position: absolute;
  inset: 0;
}

.baseGradient {
  background:
    radial-gradient(1400px 800px at 50% 15%,
      color-mix(in srgb, var(--pr-primary) 18%, transparent) 0%,
      transparent 70%),
    radial-gradient(1200px 900px at 50% 85%,
      color-mix(in srgb, var(--pr-secondary) 12%, transparent) 0%,
      transparent 75%),
    linear-gradient(180deg,
      #030508 0%,
      #050a10 50%,
      #020406 100%);
  animation: nebulaPulse 25s ease-in-out infinite alternate;
}

@keyframes nebulaPulse {
  0% { transform: scale(1); filter: brightness(0.9); }
  100% { transform: scale(1.15); filter: brightness(1.1); }
}

.backdrop {
  display: none; /* Removing static image */
}

@keyframes drift {
  from { background-position: 45% 45%; }
  to { background-position: 55% 55%; }
}

.stars {
  position: absolute;
  inset: 0;
  opacity: 0.6;
}

.nebulaSystem {
  position: absolute;
  inset: -10%;
  transform: rotate(-15deg);
  opacity: 0.5;
  filter: blur(2px);
  mix-blend-mode: color-dodge;
}

.embers {
  position: absolute;
  inset: 0;
  opacity: 0.4;
  mix-blend-mode: screen;
}

.fog {
  position: absolute;
  inset: -25%;
  filter: blur(100px);
  opacity: 0.35;
  mix-blend-mode: screen;
}

.fogOne {
  background: radial-gradient(70% 70% at 20% 30%,
      color-mix(in srgb, var(--pr-primary) 22%, transparent) 0%,
      transparent 70%);
  animation: fogDrift 15s ease-in-out infinite;
}

.fogTwo {
  background: radial-gradient(65% 65% at 80% 40%,
      color-mix(in srgb, var(--pr-secondary) 18%, transparent) 0%,
      transparent 68%);
  animation: fogDriftReverse 18s ease-in-out infinite;
}

.fogThree {
  background: radial-gradient(60% 60% at 50% 70%,
      color-mix(in srgb, var(--pr-text-muted) 16%, transparent) 0%,
      transparent 72%);
  animation: fogPulse 12s ease-in-out infinite;
}

.horizon {
  position: absolute;
  inset: auto 0 8% 0;
  height: 35%;
  background:
    radial-gradient(60% 80% at 50% 10%,
      color-mix(in srgb, var(--pr-secondary) 16%, transparent) 0%,
      transparent 70%),
    linear-gradient(180deg,
      transparent 0%,
      color-mix(in srgb, var(--pr-bg) 45%, transparent) 55%,
      color-mix(in srgb, var(--pr-bg) 80%, black) 100%);
  opacity: 0.7;
  pointer-events: none;
  animation: shimmer 8s ease-in-out infinite alternate;
}

@keyframes shimmer {
  0% { opacity: 0.5; filter: brightness(0.9); }
  100% { opacity: 0.8; filter: brightness(1.1); }
}

.foreground {
  position: absolute;
  inset: auto 0 0 0;
  height: 28%;
  background: linear-gradient(180deg,
    transparent 0%,
    color-mix(in srgb, var(--pr-bg) 78%, black) 60%,
    color-mix(in srgb, var(--pr-bg) 88%, black) 100%);
}

.noise {
  position: absolute;
  inset: 0;
  opacity: 0.08; /* Slightly more noise for texture */
  mix-blend-mode: overlay;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

.vignette {
  position: absolute;
  inset: 0;
  background: radial-gradient(70% 70% at 50% 50%,
      transparent 0%,
      color-mix(in srgb, var(--pr-bg) 55%, black) 85%);
}

.runeShimmer {
  position: absolute;
  inset: 0;
  opacity: 0.12;
  mix-blend-mode: screen;
  background:
    radial-gradient(140px 140px at 12% 18%,
      color-mix(in srgb, var(--pr-primary) 30%, transparent) 0%,
      transparent 70%),
    radial-gradient(160px 160px at 88% 16%,
      color-mix(in srgb, var(--pr-primary) 22%, transparent) 0%,
      transparent 72%),
    radial-gradient(180px 180px at 10% 88%,
      color-mix(in srgb, var(--pr-secondary) 15%, transparent) 0%,
      transparent 75%),
    radial-gradient(200px 200px at 90% 85%,
      color-mix(in srgb, var(--pr-secondary) 12%, transparent) 0%,
      transparent 78%);
  animation: runePulse 10s ease-in-out infinite alternate;
}

@keyframes runePulse {
  from { opacity: 0.08; }
  to { opacity: 0.15; }
}

.wrapper[data-reduced-motion="true"] .fog,
.wrapper[data-reduced-motion="true"] .baseGradient,
.wrapper[data-reduced-motion="true"] .backdrop,
.wrapper[data-reduced-motion="true"] .horizon,
.wrapper[data-reduced-motion="true"] .runeShimmer {
  animation: none;
}

@media (prefers-reduced-motion: reduce) {
  .fog, .baseGradient, .backdrop, .horizon, .runeShimmer {
    animation: none;
  }
}

.wrapper[data-variant="realm"] .baseGradient {
  background: linear-gradient(180deg,
      color-mix(in srgb, var(--pr-bg) 94%, #05070b) 0%,
      color-mix(in srgb, var(--pr-bg) 88%, #070a10) 55%,
      color-mix(in srgb, var(--pr-bg) 92%, #040607) 100%);
}

.wrapper[data-variant="realm"] .backdrop,
.wrapper[data-variant="realm"] .embers,
.wrapper[data-variant="realm"] .horizon,
.wrapper[data-variant="realm"] .foreground {
  display: none;
}

.wrapper[data-variant="realm"] .fog {
  opacity: 0.25;
  filter: blur(80px);
}

.wrapper[data-variant="realm"] .fogOne {
  animation-duration: 40s;
}

.wrapper[data-variant="realm"] .fogTwo {
  animation-duration: 45s;
}

.wrapper[data-variant="realm"] .fogThree {
  animation-duration: 38s;
}

@keyframes fogDrift {
  0% { transform: translate3d(0, 0, 0) scale(1); }
  50% { transform: translate3d(3%, -4%, 0) scale(1.08); }
  100% { transform: translate3d(0, 0, 0) scale(1); }
}

@keyframes fogDriftReverse {
  0% { transform: translate3d(0, 0, 0) scale(1); }
  50% { transform: translate3d(-3%, 3%, 0) scale(1.06); }
  100% { transform: translate3d(0, 0, 0) scale(1); }
}

@keyframes fogPulse {
  0% { opacity: 0.3; transform: translate3d(0, 0, 0) scale(1); }
  50% { opacity: 0.5; transform: translate3d(0, -3%, 0) scale(1.05); }
  100% { opacity: 0.3; transform: translate3d(0, 0, 0) scale(1); }
}
